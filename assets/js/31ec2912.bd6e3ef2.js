"use strict";(self.webpackChunkanotega=self.webpackChunkanotega||[]).push([[461],{8606:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>c});var n=s(5893),r=s(1151);const a={sidebar_position:1},i="NestJS",t={id:"NodeJS/nest",title:"NestJS",description:"O NestJS \xe9 um framework para construir aplica\xe7\xf5es Node.js eficientes, confi\xe1veis e escal\xe1veis. Ele \xe9 constru\xeddo com TypeScript e combina elementos de programa\xe7\xe3o orientada a objetos, programa\xe7\xe3o funcional e programa\xe7\xe3o reativa. \xc9 um framework opinado que segue o padr\xe3o de arquitetura MVC (Model-View-Controller) e \xe9 inspirado em frameworks como Angular.",source:"@site/docs/NodeJS/nest.md",sourceDirName:"NodeJS",slug:"/NodeJS/nest",permalink:"/anotega/docs/NodeJS/nest",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/NodeJS/nest.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"anotacoesSidebar",previous:{title:"NodeJS",permalink:"/anotega/docs/NodeJS/basic"},next:{title:"Creational Patterns",permalink:"/anotega/docs/category/creational-patterns"}},d={},c=[{value:"Inicializa\xe7\xe3o",id:"inicializa\xe7\xe3o",level:2},{value:"Estrutura do Projeto",id:"estrutura-do-projeto",level:2},{value:"Conceitos B\xe1sicos",id:"conceitos-b\xe1sicos",level:2},{value:"Main",id:"main",level:3},{value:"Modules",id:"modules",level:3},{value:"Controllers",id:"controllers",level:3},{value:"Services",id:"services",level:3},{value:"Data Objects (DTOs)",id:"data-objects-dtos",level:2},{value:"Invers\xe3o de Depend\xeancia (DI)",id:"invers\xe3o-de-depend\xeancia-di",level:2},{value:"Inje\xe7\xe3o de Depend\xeancias",id:"inje\xe7\xe3o-de-depend\xeancias",level:2},{value:"DTOs (Data Transfer Objects)",id:"dtos-data-transfer-objects",level:2},{value:"Valida\xe7\xf5es",id:"valida\xe7\xf5es",level:3}];function l(e){const o={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.h1,{id:"nestjs",children:"NestJS"}),"\n",(0,n.jsx)(o.p,{children:"O NestJS \xe9 um framework para construir aplica\xe7\xf5es Node.js eficientes, confi\xe1veis e escal\xe1veis. Ele \xe9 constru\xeddo com TypeScript e combina elementos de programa\xe7\xe3o orientada a objetos, programa\xe7\xe3o funcional e programa\xe7\xe3o reativa. \xc9 um framework opinado que segue o padr\xe3o de arquitetura MVC (Model-View-Controller) e \xe9 inspirado em frameworks como Angular."}),"\n",(0,n.jsx)(o.h2,{id:"inicializa\xe7\xe3o",children:"Inicializa\xe7\xe3o"}),"\n",(0,n.jsx)(o.p,{children:"Para iniciar um projeto NestJS, voc\xea pode usar o CLI do NestJS. Primeiro, instale o CLI globalmente:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"npm install -g @nestjs/cli\n"})}),"\n",(0,n.jsx)(o.p,{children:"Em seguida, crie um novo projeto:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"nest new my-nest-app\n"})}),"\n",(0,n.jsx)(o.p,{children:"Isso criar\xe1 uma estrutura de diret\xf3rios b\xe1sica para o seu projeto NestJS."}),"\n",(0,n.jsx)(o.h2,{id:"estrutura-do-projeto",children:"Estrutura do Projeto"}),"\n",(0,n.jsx)(o.p,{children:"A estrutura b\xe1sica de um projeto NestJS \xe9 a seguinte:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{children:"my-nest-app/\n\u251c\u2500\u2500 node_modules/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 app.controller.ts\n\u2502   \u251c\u2500\u2500 app.module.ts\n\u2502   \u251c\u2500\u2500 app.service.ts\n\u2502   \u2514\u2500\u2500 main.ts\n\u251c\u2500\u2500 test/\n\u2502   \u2514\u2500\u2500 app.e2e-spec.ts\n\u251c\u2500\u2500 .eslintrc.js\n\u251c\u2500\u2500 .prettierrc\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 package-lock.json\n\u251c\u2500\u2500 tsconfig.json\n\u251c\u2500\u2500 tsconfig.build.json\n\u2514\u2500\u2500 nest-cli.json\n"})}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"node_modules/"})," cont\xe9m as depend\xeancias do projeto."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"src/"})," cont\xe9m o c\xf3digo-fonte da aplica\xe7\xe3o.","\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"app.controller.ts"})," define os controladores da aplica\xe7\xe3o."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"app.module.ts"})," \xe9 o m\xf3dulo raiz da aplica\xe7\xe3o."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"app.service.ts"})," cont\xe9m a l\xf3gica de neg\xf3cios."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"main.ts"})," \xe9 o ponto de entrada da aplica\xe7\xe3o."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"test/"})," cont\xe9m os testes da aplica\xe7\xe3o.","\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"app.e2e-spec.ts"})," \xe9 um exemplo de teste de ponta a ponta."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:".eslintrc.js"})," \xe9 o arquivo de configura\xe7\xe3o do ESLint(F)."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:".prettierrc"})," \xe9 o arquivo de configura\xe7\xe3o do Prettier."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"package.json"})," cont\xe9m as depend\xeancias e scripts do projeto."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"package-lock.json"})," \xe9 o arquivo de bloqueio de depend\xeancias do NPM."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"tsconfig.json"})," \xe9 o arquivo de configura\xe7\xe3o do TypeScript."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"tsconfig.build.json"})," \xe9 o arquivo de configura\xe7\xe3o do TypeScript para constru\xe7\xe3o."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"nest-cli.json"})," \xe9 o arquivo de configura\xe7\xe3o do CLI do NestJS."]}),"\n"]}),"\n",(0,n.jsx)(o.h2,{id:"conceitos-b\xe1sicos",children:"Conceitos B\xe1sicos"}),"\n",(0,n.jsx)(o.h3,{id:"main",children:"Main"}),"\n",(0,n.jsxs)(o.p,{children:["O ponto de entrada da aplica\xe7\xe3o \xe9 o arquivo ",(0,n.jsx)(o.code,{children:"main.ts"}),", onde o aplicativo NestJS \xe9 criado e iniciado. Aqui, voc\xea pode configurar o servidor, middleware e outras funcionalidades."]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-typescript",metastring:'title="main.ts"',children:"import { NestFactory } from '@nestjs/core';\nimport { AppModule } from './app.module';\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n  await app.listen(3000);\n}\nbootstrap();\n"})}),"\n",(0,n.jsx)(o.h3,{id:"modules",children:"Modules"}),"\n",(0,n.jsxs)(o.p,{children:["Os m\xf3dulos s\xe3o a base da estrutura do NestJS. Cada m\xf3dulo \xe9 uma classe anotada com o decorador ",(0,n.jsx)(o.code,{children:"@Module()"}),", que define os componentes que pertencem a esse m\xf3dulo, como controladores e provedores."]}),"\n",(0,n.jsxs)(o.p,{children:["Serve para conectar diferentes partes da aplica\xe7\xe3o, como controladores, servi\xe7os e outros m\xf3dulos. Cada m\xf3dulo \xe9 uma classe anotada com o decorador ",(0,n.jsx)(o.code,{children:"@Module()"}),"."]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-typescript",metastring:'title="app.module.ts"',children:"import { Module } from '@nestjs/common';\nimport { AppController } from './app.controller';\nimport { AppService } from './app.service';\n\n@Module({\n  imports: [],\n  controllers: [AppController],\n  providers: [AppService],\n})\nexport class AppModule {}\n"})}),"\n",(0,n.jsx)(o.h3,{id:"controllers",children:"Controllers"}),"\n",(0,n.jsxs)(o.p,{children:["Os controladores s\xe3o respons\xe1veis por lidar com as requisi\xe7\xf5es HTTP. Eles s\xe3o anotados com o decorador ",(0,n.jsx)(o.code,{children:"@Controller()"})," e definem rotas para os endpoints da aplica\xe7\xe3o."]}),"\n",(0,n.jsxs)(o.p,{children:["Possui m\xe9todos que respondem a requisi\xe7\xf5es HTTP e s\xe3o anotados com decoradores como ",(0,n.jsx)(o.code,{children:"@Get()"}),", ",(0,n.jsx)(o.code,{children:"@Post()"}),", ",(0,n.jsx)(o.code,{children:"@Put()"}),", etc. Esses m\xe9todos recebem os dados da requisi\xe7\xe3o e retornam uma resposta."]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-typescript",metastring:'title="app.controller.ts"',children:"import { Controller, Get } from '@nestjs/common';\n\n@Controller('/')\nexport class AppController {\n    constructor(private readonly appService: AppService) {}\n\n    @Get()\n    getHello(): string {\n        return this.appService.getHello();\n    }\n}\n"})}),"\n",(0,n.jsxs)(o.admonition,{title:"Rotas",type:"tip",children:[(0,n.jsx)(o.p,{children:"As rotas s\xe3o definidas nos controladores e podem ser personalizadas com par\xe2metros, consultas e outras op\xe7\xf5es."}),(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-typescript",metastring:'title="app.controller.ts"',children:"@Controller('users')\nexport class UsersController {\n    @Get(':id')\n    getUser(@Param('id') id: string): string {\n        return `User ID: ${id}`;\n    }\n\n    @Post('create')\n    createUser(@Body() createUserDto: CreateUserDto): string {\n        return `User created with name: ${createUserDto.name}`;\n    }\n}\n\n\n"})})]}),"\n",(0,n.jsx)(o.h3,{id:"services",children:"Services"}),"\n",(0,n.jsxs)(o.p,{children:["Os servi\xe7os cont\xeam a l\xf3gica de neg\xf3cios da aplica\xe7\xe3o. Eles s\xe3o anotados com o decorador ",(0,n.jsx)(o.code,{children:"@Injectable()"})," e podem ser injetados em controladores ou outros servi\xe7os."]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-typescript",metastring:'title="app.service.ts"',children:"\nimport { Injectable } from '@nestjs/common';\n@Injectable()\nexport class AppService {\n    getHello(): string {\n        return 'Hello World!';\n    }\n    }\n"})}),"\n",(0,n.jsx)(o.h2,{id:"data-objects-dtos",children:"Data Objects (DTOs)"}),"\n",(0,n.jsxs)(o.p,{children:["Os Data Transfer Objects (DTOs) s\xe3o usados para definir a estrutura dos dados que ser\xe3o enviados e recebidos nas requisi\xe7\xf5es. Eles s\xe3o anotados com o decorador ",(0,n.jsx)(o.code,{children:"@Dto()"})," e podem incluir valida\xe7\xf5es usando decoradores do pacote ",(0,n.jsx)(o.code,{children:"class-validator"}),"."]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-typescript",metastring:'title="create-user.dto.ts"',children:"import { IsString, IsInt } from 'class-validator';\nexport class CreateUserDto {\n    @IsString()\n    name: string;\n    @IsInt()\n    age: number;\n}\n"})}),"\n",(0,n.jsx)(o.admonition,{title:"Valida\xe7\xf5es",type:"tip",children:(0,n.jsx)(o.p,{children:"As valida\xe7\xf5es s\xe3o aplicadas automaticamente quando os DTOs s\xe3o usados nas rotas. Se os dados n\xe3o atenderem aos crit\xe9rios definidos, uma exce\xe7\xe3o ser\xe1 lan\xe7ada."})}),"\n",(0,n.jsx)(o.h2,{id:"invers\xe3o-de-depend\xeancia-di",children:"Invers\xe3o de Depend\xeancia (DI)"}),"\n",(0,n.jsx)(o.p,{children:"O NestJS utiliza o padr\xe3o de Invers\xe3o de Depend\xeancia (DI) para gerenciar a cria\xe7\xe3o e inje\xe7\xe3o de depend\xeancias. Isso permite que os servi\xe7os sejam facilmente test\xe1veis e reutiliz\xe1veis."}),"\n",(0,n.jsx)(o.p,{children:"Os servi\xe7os podem ser injetados em controladores ou outros servi\xe7os usando o construtor. O NestJS cuida da cria\xe7\xe3o e inje\xe7\xe3o das inst\xe2ncias necess\xe1rias."}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-typescript",metastring:'title="app.controller.ts"',children:"import { Controller, Get } from '@nestjs/common';\nimport { AppService } from './app.service';\n@Controller('/')\nexport class AppController {\n    constructor(private readonly appService: AppService) {}\n    @Get()\n    getHello(): string {\n        return this.appService.getHello();\n    }\n}\n"})}),"\n",(0,n.jsxs)(o.p,{children:["Nesse exemplo, o ",(0,n.jsx)(o.code,{children:"AppService"})," \xe9 injetado no ",(0,n.jsx)(o.code,{children:"AppController"}),", permitindo que o controlador utilize os m\xe9todos do servi\xe7o."]}),"\n",(0,n.jsx)(o.h2,{id:"inje\xe7\xe3o-de-depend\xeancias",children:"Inje\xe7\xe3o de Depend\xeancias"}),"\n",(0,n.jsx)(o.p,{children:"A inje\xe7\xe3o de depend\xeancias \xe9 uma caracter\xedstica fundamental do NestJS, permitindo que voc\xea injete servi\xe7os e outros m\xf3dulos em seus controladores e servi\xe7os. Isso promove a reutiliza\xe7\xe3o de c\xf3digo e facilita os testes."}),"\n",(0,n.jsx)(o.p,{children:"Voc\xea pode injetar servi\xe7os usando o construtor do controlador ou servi\xe7o. O NestJS resolve automaticamente as depend\xeancias necess\xe1rias."}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-typescript",metastring:'title="app.module.ts"',children:"import { Module } from '@nestjs/common';\nimport { AppController } from './app.controller';\nimport { AppService } from './app.service';\nimport { UsersModule } from './users/users.module'; \n\n@Module({\n  imports: [UsersModule], // Importando o m\xf3dulo de usu\xe1rios\n  controllers: [AppController],\n  providers: [AppService],\n})\nexport class AppModule {}\n"})}),"\n",(0,n.jsx)(o.h2,{id:"dtos-data-transfer-objects",children:"DTOs (Data Transfer Objects)"}),"\n",(0,n.jsx)(o.p,{children:"Os DTOs s\xe3o usados para definir a estrutura dos dados que ser\xe3o enviados e recebidos nas requisi\xe7\xf5es. Eles ajudam a validar e transformar os dados antes de serem processados pelos controladores ou servi\xe7os."}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-typescript",metastring:'title="create-user.dto.ts"',children:"export interface CreateUserDto {\n    name: string;\n    age: number;\n}\n"})}),"\n",(0,n.jsx)(o.h3,{id:"valida\xe7\xf5es",children:"Valida\xe7\xf5es"}),"\n",(0,n.jsxs)(o.p,{children:["As valida\xe7\xf5es podem ser aplicadas aos DTOs usando o pacote ",(0,n.jsx)(o.code,{children:"class-validator"}),". Isso permite que voc\xea defina regras de valida\xe7\xe3o para os campos dos DTOs, garantindo que os dados recebidos estejam corretos."]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-typescript",metastring:'title="create-user.dto.ts"',children:"import { IsString, IsInt } from 'class-validator';\nexport class CreateUserDto {\n    @IsString()\n    name: string;\n    @IsInt()\n    age: number;\n}\n"})}),"\n",(0,n.jsxs)(o.admonition,{type:"warning",children:[(0,n.jsx)(o.mdxAdmonitionTitle,{}),(0,n.jsx)(o.p,{children:"Decorators de valida\xe7\xe3o do class-validator s\xf3 funcionam em classes, n\xe3o em interfaces. Portanto, \xe9 recomendado usar classes para DTOs quando voc\xea precisar de valida\xe7\xf5es."})]})]})}function p(e={}){const{wrapper:o}={...(0,r.a)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},1151:(e,o,s)=>{s.d(o,{Z:()=>t,a:()=>i});var n=s(7294);const r={},a=n.createContext(r);function i(e){const o=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function t(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(a.Provider,{value:o},e.children)}}}]);